C51 COMPILER V9.52.0.0   MAIN                                                              03/22/2022 04:22:43 PAGE 1   


C51 COMPILER V9.52.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: D:\Program Files (x86)\Keil\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          /****  Author: ä¸Šå®˜å¯ç¼–ç¨‹(æŠ–éŸ³) ************
   2           ****  å½•æ’­è¯¾å ‚ä»£ç ï¼Œä¸ºå°ç™½å­¦ä¹ åŠŸèƒ½å®ç° ****
   3           ****  ä»£ç åˆç†æ€§å’Œæ•ˆç‡ä¸åšè¯„ä¼° ************
   4           ****  2022/3/22 3:35 **********************
   5          ********************************************/
   6          
   7          #include "motor.h"
   8          #include "delay.h"
   9          #include "uart.h"
  10          #include "reg52.h"
  11          #include "time.h"
  12          #include "stdio.h"
  13          #include "Oled.h"
  14          
  15          sbit speedIO = P3^2;//å¤–éƒ¨ä¸­æ–­0
  16          unsigned int speedCnt = 0; //ç»Ÿè®¡æ ¼å­ï¼Œè„‰å†²æ¬¡æ•°
  17          extern unsigned int speed;//é€Ÿåº¦
  18          extern char signal; //ä¸»ç¨‹åºå‘é€Ÿåº¦æ•°æ®çš„é€šçŸ¥
  19          char speedMes[24];  //ä¸»ç¨‹åºå‘é€é€Ÿåº¦æ•°æ®çš„å­—ç¬¦ä¸²ç¼“å†²åŒº
  20          
  21          void Ex0Init()
  22          {
  23   1        EX0 = 1;//å…è®¸ä¸­æ–­
  24   1        //EA = 1;åœ¨ä¸²å£åˆå§‹åŒ–å‡½æ•°ä¸­å·²ç»æ‰“å¼€äº†æ€»ä¸­æ–­
  25   1        IT0 = 1;//å¤–éƒ¨ä¸­æ–­çš„ä¸‹é™æ²¿è§¦å‘
  26   1      }
  27          
  28          void main()
  29          {
  30   1        Time0Init();//å®šæ—¶å™¨0åˆå§‹åŒ–
  31   1        UartInit();//ä¸²å£ç›¸å…³åˆå§‹åŒ–
  32   1        //å¤–éƒ¨ä¸­æ–­åˆå§‹åŒ–
  33   1        Ex0Init();
  34   1        Oled_Init();
  35   1        Oled_Clear();
  36   1        while(1){
  37   2          if(signal){//å®šæ—¶å™¨1såˆ°ç‚¹ï¼ŒæŠŠsignalç½®ä¸€ï¼Œä¸»ç¨‹åºå‘é€é€Ÿåº¦
  38   3            sprintf(speedMes,"speed:%d cm/s",speed);//ä¸²å£æ•°æ®çš„å­—ç¬¦ä¸²æ‹¼è£…ï¼Œspeedæ˜¯æ ¼å­ï¼Œæ¯ä¸ªæ ¼å­
             -1cm
  39   3            SendString(speedMes);//é€Ÿåº¦å‘å‡ºå»
  40   3          
  41   3            signal = 0;//æ¸…0speed,ä¸‹æ¬¡ç”±å®šæ—¶å™¨1såçš„ä¸­æ–­å¤„ç†ä¸­å†ç½®ä¸€
  42   3          }
  43   2          Oled_Show_Str(2,2,speedMes);
  44   2        }
  45   1      }
  46          
  47          void speedHandler() interrupt 0 //å¤–éƒ¨ä¸­æ–­å¤„ç†å‡½æ•°
  48          {
  49   1        speedCnt++;//ç ç›˜è½¬åŠ¨äº†ä¸€ä¸ªæ ¼å­
  50   1      }
  51          
  52          


C51 COMPILER V9.52.0.0   MAIN                                                              03/22/2022 04:22:43 PAGE 2   

MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     88    ----
   CONSTANT SIZE    =     14    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     26    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
